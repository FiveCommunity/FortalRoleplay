import { createElement } from "react";

import { Post } from "@/hooks/post";
import { cn } from "@/utils/misc";
import { useCamera } from "../stores/useCamera";

const Icon: Record<string, () => JSX.Element> = {
  fullbody: () => (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className="w-5"
      viewBox="0 0 20 32"
      fill="none"
    >
      <path
        d="M6.00003 4C6.00003 2.93913 6.42146 1.92172 7.17161 1.17157C7.92175 0.421427 8.93917 0 10 0C11.0609 0 12.0783 0.421427 12.8285 1.17157C13.5786 1.92172 14 2.93913 14 4C14 5.06087 13.5786 6.07828 12.8285 6.82843C12.0783 7.57857 11.0609 8 10 8C8.93917 8 7.92175 7.57857 7.17161 6.82843C6.42146 6.07828 6.00003 5.06087 6.00003 4ZM9.00004 24V30C9.00004 31.1063 8.10629 32 7.00004 32C5.89378 32 5.00003 31.1063 5.00003 30V17.9875L3.69378 20.0625C3.10628 21 1.86878 21.275 0.937533 20.6875C0.00628306 20.1 -0.281217 18.8687 0.306283 17.9375L2.80003 13.9812C4.35628 11.5 7.07504 10 10 10C12.925 10 15.6438 11.5 17.2 13.975L19.6938 17.9375C20.2813 18.875 20 20.1062 19.0688 20.6938C18.1375 21.2812 16.9 21 16.3125 20.0688L15 17.9875V30C15 31.1063 14.1063 32 13 32C11.8938 32 11 31.1063 11 30V24H9.00004Z"
        stroke="white"
        strokeWidth={1.5}
      />
    </svg>
  ),
  face: () => (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className="w-6"
      viewBox="0 0 24 26"
      fill="none"
    >
      <path
        d="M11.588 0.0761861C7.76787 0.604414 4.45924 3.05763 3.03137 6.42C2.43997 7.81168 2.20021 9.08654 2.20021 10.8592V11.687L1.19324 13.5257C0.639139 14.5314 0.159628 15.4405 0.127661 15.5421C-0.138734 16.3446 0.0157749 17.1014 0.553893 17.6144C0.905534 17.9445 1.31045 18.1172 1.94448 18.2036L2.20021 18.234V19.6409C2.20021 21.2409 2.24284 21.5101 2.55186 22.0942C2.8076 22.5868 3.36702 23.1252 3.85186 23.3538C4.58711 23.6941 5.06663 23.7296 6.37196 23.5417L7.15516 23.43V24.3696C7.15516 25.4718 7.20844 25.6546 7.60271 25.873L7.83181 26H13.9749H20.1179L20.347 25.873C20.4962 25.7918 20.6081 25.6749 20.6827 25.5276C20.7946 25.3092 20.7946 25.2635 20.7946 21.5202V17.7312L21.1302 17.3807C22.6274 15.8214 23.5544 13.9473 23.9114 11.7531C24.0286 11.0318 24.0286 9.61985 23.9167 8.88338C23.5598 6.64348 22.5102 4.63215 20.8692 3.06271C19.1643 1.42723 17.0384 0.406329 14.6622 0.0761861C13.9589 -0.0253962 12.2913 -0.0253962 11.588 0.0761861ZM13.7458 1.87419C15.9675 2.03673 17.8802 2.8697 19.4306 4.34264C20.8159 5.66321 21.663 7.26822 21.9721 9.16273C22.0786 9.82809 22.0573 11.0928 21.9188 11.7937C21.5831 13.5409 20.6561 15.2221 19.3827 16.4005C18.8339 16.9084 18.8765 16.5478 18.8765 20.6161V24.1715H14.0068H9.13181L9.11583 23.1151C9.09985 22.0586 9.09985 22.0535 8.95067 21.8453C8.77484 21.5862 8.46583 21.4288 8.14615 21.4288C8.01295 21.4288 7.34697 21.5101 6.665 21.6116C5.98302 21.7081 5.31704 21.7894 5.1945 21.7894C4.84818 21.7945 4.5072 21.5761 4.32072 21.2307L4.17154 20.9615V19.0365C4.17154 17.4163 4.16088 17.076 4.09162 16.9236C3.88916 16.4665 3.62809 16.3548 2.74899 16.3497C2.02972 16.3497 1.92849 16.3294 1.97111 16.2075C1.9871 16.1618 2.48259 15.2424 3.07399 14.1657L4.1449 12.2102L4.17687 10.8134C4.21416 9.3405 4.26744 8.90877 4.52318 8.04532C5.38097 5.16038 7.89041 2.8443 10.9646 2.10783C11.604 1.95546 12.1634 1.87927 12.9626 1.83356C13.0372 1.82848 13.3888 1.8488 13.7458 1.87419Z"
        fill="white"
      />
    </svg>
  ),
  torso: () => (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className="size-7"
      viewBox="0 0 28 28"
      fill="none"
    >
      <path
        d="M20.457 26.75L20.6436 26.6289L20.8457 26.4971L20.8477 26.4961C21.0733 26.3483 21.2484 26.1545 21.3711 25.9258L21.4199 25.8252L21.4238 25.8184L21.4268 25.8105C21.4462 25.7648 21.4865 25.6731 21.5146 25.5674C21.5462 25.4487 21.5571 25.3367 21.5586 25.2236C21.561 25.0364 21.5356 24.7654 21.498 24.3594V24.3584C21.2894 22.1131 21.2228 20.7864 21.2607 19.6426L21.2842 19.1621V19.1611C21.293 19.0127 21.3038 18.8778 21.3145 18.7451C21.6662 19.6967 22.2168 21.0765 22.4346 21.5205L22.4355 21.5234C22.4822 21.6175 22.5646 21.7949 22.6689 21.9336C22.8131 22.1251 23.0151 22.2778 23.292 22.3428C23.5085 22.3936 23.7315 22.3787 23.9062 22.3613C24.0944 22.3427 24.3364 22.3074 24.6221 22.2666H24.6211C24.8939 22.2283 25.1517 22.1882 25.3477 22.1562C25.4453 22.1403 25.5302 22.1259 25.5947 22.1143C25.6264 22.1085 25.6562 22.1028 25.6816 22.0977C25.688 22.0964 25.748 22.0853 25.8047 22.0664L25.8242 22.0596L25.8428 22.0527C26.2074 21.9091 26.3734 21.6088 26.458 21.3711C26.4964 21.2632 26.5287 21.1386 26.5576 21L26.6377 20.5449V20.542C26.7302 19.9257 26.75 19.5781 26.75 18.5186L26.7432 17.6572C26.7246 16.9207 26.6622 16.4825 26.4951 15.6475C26.3266 14.8056 26.0793 13.9684 25.7568 13.165L25.7559 13.1621C25.6893 12.9981 25.6302 12.8413 25.5889 12.7236C25.5851 12.713 25.5814 12.703 25.5781 12.6934C25.5865 12.6563 25.5963 12.6134 25.6074 12.5654C25.649 12.3868 25.706 12.1487 25.7686 11.8965L25.8701 11.4834C26.083 10.5716 26.1382 10.0073 26.0703 9.2998C25.886 7.34546 24.9671 5.74609 23.3828 4.72461L23.3818 4.72559C22.7714 4.32665 22.2619 4.11323 21.1338 3.72949H21.1318C19.7501 3.26294 19.5601 3.19021 18.8662 2.85449L18.8652 2.85352C18.132 2.5005 17.6141 2.1573 17.2998 1.85449L17.2939 1.84863C17.1935 1.75387 17.0849 1.66058 16.9873 1.58398C16.9387 1.54585 16.887 1.50749 16.8369 1.47363C16.8 1.44866 16.7182 1.3943 16.6211 1.35547L16.6016 1.34766C16.4913 1.30713 16.3789 1.29728 16.3574 1.29492C16.3059 1.28928 16.2473 1.28476 16.1865 1.28125C16.063 1.27412 15.8984 1.26814 15.6982 1.26367C15.2962 1.25469 14.7248 1.25 13.9951 1.25C13.0446 1.25 12.4726 1.25267 12.123 1.26367C11.9503 1.26911 11.8079 1.27689 11.6924 1.29199C11.5849 1.30606 11.4456 1.33413 11.3037 1.40625V1.4043C11.2991 1.40661 11.2947 1.40969 11.29 1.41211C11.2879 1.41322 11.2853 1.41391 11.2832 1.41504V1.41602C11.1693 1.47666 11.0541 1.56628 10.9834 1.62402C10.8927 1.69803 10.7919 1.78808 10.6982 1.88086V1.87988C10.0785 2.47223 8.98705 3.03563 6.7959 3.76562V3.7666C5.7713 4.10642 5.12547 4.38463 4.5752 4.75684V4.75781C3.02249 5.81031 2.14904 7.33894 1.94922 9.27832L1.92676 9.57129C1.89159 10.2465 1.99209 10.878 2.25 11.8965C2.31252 12.1488 2.36956 12.3867 2.41113 12.5654C2.42246 12.6141 2.43104 12.6578 2.43945 12.6953C2.43638 12.7042 2.43409 12.7139 2.43066 12.7236C2.38929 12.8413 2.33021 12.9981 2.26367 13.1621L2.2627 13.1641C1.76582 14.4006 1.45921 15.6695 1.31152 17.0371V17.0381C1.20616 18.0211 1.23977 19.5731 1.38574 20.5293C1.43348 20.8495 1.47914 21.1139 1.54395 21.3145C1.62358 21.5608 1.7575 21.7911 2.01562 21.9551C2.12277 22.0232 2.23482 22.0532 2.24316 22.0557C2.28308 22.0676 2.32494 22.0782 2.3623 22.0869C2.43883 22.1047 2.53361 22.1235 2.63574 22.1426C2.84206 22.1811 3.10735 22.2248 3.38379 22.2656L3.38867 22.2666C3.67672 22.3074 3.92011 22.3427 4.10938 22.3613C4.2853 22.3786 4.50834 22.3931 4.72461 22.3428C5.0012 22.2783 5.20442 22.1269 5.34961 21.9346C5.40213 21.865 5.44867 21.7854 5.48828 21.7119L5.58301 21.5234L5.58496 21.5205C5.80374 21.0744 6.35657 19.6842 6.70801 18.7324C6.73936 19.18 6.74803 19.663 6.74805 20.3906C6.74345 21.8477 6.72681 22.1663 6.52148 24.3584V24.3594C6.48395 24.7654 6.45755 25.0364 6.45996 25.2236C6.46144 25.3367 6.47239 25.4487 6.50391 25.5674C6.532 25.673 6.57232 25.7648 6.5918 25.8105L6.5957 25.8184L6.59863 25.8252C6.72181 26.0978 6.91385 26.3271 7.17188 26.4961L7.17383 26.4971L7.375 26.6289L7.56152 26.75H20.457Z"
        stroke="white"
        strokeWidth="1.5"
      />
    </svg>
  ),
  feet: () => (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className="size-6"
      viewBox="0 0 26 26"
      fill="none"
    >
      <path
        d="M2.4882 1.04695C1.84913 1.18301 1.25129 1.71315 1.08637 2.29021C0.967831 2.70776 0.972985 8.27664 1.09152 8.64258C1.28737 9.25248 1.82336 9.71694 2.49851 9.86707C2.74074 9.92337 3.20973 9.90461 6.64732 9.70756C8.77584 9.58089 10.6157 9.46829 10.7394 9.45422L10.9559 9.43076V9.98436C10.9559 11.2933 11.2187 12.8181 11.6568 14.0942C11.7599 14.385 12.0124 15.0325 12.2237 15.5298C12.7906 16.8669 12.837 17.0686 12.8319 18.1195C12.8319 18.9687 12.8267 19.0015 12.6412 19.6208C12.5381 19.968 12.3886 20.4325 12.3165 20.653C12.131 21.1878 12.0897 21.9854 12.2186 22.5014C12.3629 23.0926 12.6566 23.5664 13.1669 24.0309C14.0585 24.8378 15.0532 25.1193 16.4189 24.9551C17.4651 24.8238 17.6507 24.8191 19.5627 24.8941C20.5987 24.9364 21.6913 24.9692 21.9902 24.9692C22.9797 24.9692 23.6755 24.7299 24.3352 24.1622C24.8557 23.7119 25 23.4163 25 22.8111C24.9948 22.417 24.9794 22.3325 24.8454 22.0839C24.665 21.7461 24.3145 21.413 23.9795 21.2676C23.8404 21.2066 23.3199 21.0752 22.8199 20.9814C21.248 20.6764 20.5265 20.3808 19.5009 19.6302C19.0937 19.3346 18.4547 18.6872 18.331 18.4479C18.2588 18.2978 18.2434 17.6973 18.2228 12.302L18.197 6.32026L18.0578 5.92148C17.862 5.34911 17.7383 5.10515 17.4239 4.67821C16.8673 3.91349 16.0324 3.33174 15.0686 3.04086C14.6254 2.90481 3.22004 0.990651 2.89535 1.00003C2.78197 1.00473 2.59643 1.02349 2.4882 1.04695Z"
        stroke="white"
        strokeWidth="1.5"
      />
    </svg>
  ),
};

export default function Camera() {
  const { current: active, set: setActive } = useCamera(); 
  const cameras = ["fullbody", "face", "torso", "feet"];

  return (
    <div className="z-50 flex flex-col gap-1.5 overflow-visible">
      {cameras.map((cam: any) => {
        const a = active === cam;
        return (
          <button
            onClick={() => {
              if (!a) Post.create("Character:SetCamera", { section: "Barbershop", id: cam }).then((response) => {
                if (response) setActive(cam)
              })
            }}
            key={cam}
            className={cn(
              "grid size-[3.5rem] place-items-center rounded-md border",
              a
                ? "bg-gradient-primary glow border-primary"
                : "bg-section border-white/15",
            )}
          >
            <div className={cn(!a && "opacity-45")}>
              {createElement(Icon[cam])}
            </div>
          </button>
        );
      })}
    </div>
  );
}
