import { createElement } from "react";

import { Post } from "@/hooks/post";
import { cn } from "@/utils/misc";
import { useCamera } from "../stores/useCamera";

const Icon: Record<string, () => JSX.Element> = {
  fullbody: () => (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className="w-5"
      viewBox="0 0 20 32"
      fill="none"
    >
      <path
        d="M6.00003 4C6.00003 2.93913 6.42146 1.92172 7.17161 1.17157C7.92175 0.421427 8.93917 0 10 0C11.0609 0 12.0783 0.421427 12.8285 1.17157C13.5786 1.92172 14 2.93913 14 4C14 5.06087 13.5786 6.07828 12.8285 6.82843C12.0783 7.57857 11.0609 8 10 8C8.93917 8 7.92175 7.57857 7.17161 6.82843C6.42146 6.07828 6.00003 5.06087 6.00003 4ZM9.00004 24V30C9.00004 31.1063 8.10629 32 7.00004 32C5.89378 32 5.00003 31.1063 5.00003 30V17.9875L3.69378 20.0625C3.10628 21 1.86878 21.275 0.937533 20.6875C0.00628306 20.1 -0.281217 18.8687 0.306283 17.9375L2.80003 13.9812C4.35628 11.5 7.07504 10 10 10C12.925 10 15.6438 11.5 17.2 13.975L19.6938 17.9375C20.2813 18.875 20 20.1062 19.0688 20.6938C18.1375 21.2812 16.9 21 16.3125 20.0688L15 17.9875V30C15 31.1063 14.1063 32 13 32C11.8938 32 11 31.1063 11 30V24H9.00004Z"
        stroke="white"
        strokeWidth={1.5}
      />
    </svg>
  ),
  face: () => (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className="w-6"
      viewBox="0 0 24 26"
      fill="none"
    >
      <path
        d="M11.588 0.0761861C7.76787 0.604414 4.45924 3.05763 3.03137 6.42C2.43997 7.81168 2.20021 9.08654 2.20021 10.8592V11.687L1.19324 13.5257C0.639139 14.5314 0.159628 15.4405 0.127661 15.5421C-0.138734 16.3446 0.0157749 17.1014 0.553893 17.6144C0.905534 17.9445 1.31045 18.1172 1.94448 18.2036L2.20021 18.234V19.6409C2.20021 21.2409 2.24284 21.5101 2.55186 22.0942C2.8076 22.5868 3.36702 23.1252 3.85186 23.3538C4.58711 23.6941 5.06663 23.7296 6.37196 23.5417L7.15516 23.43V24.3696C7.15516 25.4718 7.20844 25.6546 7.60271 25.873L7.83181 26H13.9749H20.1179L20.347 25.873C20.4962 25.7918 20.6081 25.6749 20.6827 25.5276C20.7946 25.3092 20.7946 25.2635 20.7946 21.5202V17.7312L21.1302 17.3807C22.6274 15.8214 23.5544 13.9473 23.9114 11.7531C24.0286 11.0318 24.0286 9.61985 23.9167 8.88338C23.5598 6.64348 22.5102 4.63215 20.8692 3.06271C19.1643 1.42723 17.0384 0.406329 14.6622 0.0761861C13.9589 -0.0253962 12.2913 -0.0253962 11.588 0.0761861ZM13.7458 1.87419C15.9675 2.03673 17.8802 2.8697 19.4306 4.34264C20.8159 5.66321 21.663 7.26822 21.9721 9.16273C22.0786 9.82809 22.0573 11.0928 21.9188 11.7937C21.5831 13.5409 20.6561 15.2221 19.3827 16.4005C18.8339 16.9084 18.8765 16.5478 18.8765 20.6161V24.1715H14.0068H9.13181L9.11583 23.1151C9.09985 22.0586 9.09985 22.0535 8.95067 21.8453C8.77484 21.5862 8.46583 21.4288 8.14615 21.4288C8.01295 21.4288 7.34697 21.5101 6.665 21.6116C5.98302 21.7081 5.31704 21.7894 5.1945 21.7894C4.84818 21.7945 4.5072 21.5761 4.32072 21.2307L4.17154 20.9615V19.0365C4.17154 17.4163 4.16088 17.076 4.09162 16.9236C3.88916 16.4665 3.62809 16.3548 2.74899 16.3497C2.02972 16.3497 1.92849 16.3294 1.97111 16.2075C1.9871 16.1618 2.48259 15.2424 3.07399 14.1657L4.1449 12.2102L4.17687 10.8134C4.21416 9.3405 4.26744 8.90877 4.52318 8.04532C5.38097 5.16038 7.89041 2.8443 10.9646 2.10783C11.604 1.95546 12.1634 1.87927 12.9626 1.83356C13.0372 1.82848 13.3888 1.8488 13.7458 1.87419Z"
        fill="white"
      />
    </svg>
  ),
  torso: () => (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className="w-[1.85rem]"
      viewBox="0 0 30 26"
      fill="none"
    >
      <path
        d="M10.2663 1C10.6076 1 10.8919 1.26719 10.9969 1.61875C11.5351 3.43281 13.1232 4.75 15 4.75C16.8768 4.75 18.4649 3.43281 19.0031 1.61875C19.1081 1.26719 19.3924 1 19.7337 1H20.2849C21.2693 1 22.2186 1.37031 22.9755 2.04531L28.4966 6.97188C28.7854 7.22969 28.9648 7.60469 28.9954 8.00781C29.026 8.41094 28.9035 8.80938 28.6541 9.11406L26.2042 12.1141C25.7054 12.7281 24.8392 12.7984 24.253 12.2781L21.9999 10.2672V22C21.9999 23.6547 20.7443 25 19.1999 25H10.8001C9.25573 25 8.00012 23.6547 8.00012 22V10.2672L5.74704 12.2781C5.16517 12.7984 4.29894 12.7281 3.79582 12.1141L1.34586 9.11406C1.09649 8.80938 0.973996 8.41094 1.00462 8.00781C1.03524 7.60469 1.21462 7.22969 1.50336 6.97188L7.02451 2.04531C7.78138 1.37031 8.73073 1 9.71509 1H10.2663Z"
        stroke="white"
        strokeWidth="1.5"
      />
    </svg>
  ),
  feet: () => (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className="h-6"
      viewBox="0 0 28 24"
      fill="none"
    >
      <path
        d="M17.9 0.685547C15.3122 0.685547 11.4 2.09983 11.4 2.09983V7.75698C13.35 7.75698 14.4875 8.46412 15.625 9.17126C16.7625 9.8784 17.9 10.5855 19.85 10.5855C22.1412 10.5855 27 9.8784 27 6.34269C27 2.80698 21.8 0.685547 17.9 0.685547ZM6.2 4.9284C6.2 6.48854 7.36594 7.75698 8.8 7.75698H10.1V2.09983H8.8C7.36594 2.09983 6.2 3.36827 6.2 4.9284ZM12.7 23.3141C16.6 23.3141 21.8 21.1927 21.8 17.657C21.8 14.1213 16.9412 13.4141 14.65 13.4141C12.7 13.4141 11.5625 14.1213 10.425 14.8284C9.2875 15.5355 8.15 16.2427 6.2 16.2427V21.8998C6.2 21.8998 10.1122 23.3141 12.7 23.3141ZM1 19.0713C1 20.6314 2.16594 21.8998 3.6 21.8998H4.9V16.2427H3.6C2.16594 16.2427 1 17.5111 1 19.0713Z"
        stroke="white"
        strokeWidth="1.5"
      />
    </svg>
  ),
};

export default function Camera() {
  const { current: active, set: setActive } = useCamera(); 
  const cameras = ["fullbody", "face", "torso", "feet"];

  return (
    <div className="z-50 flex flex-col gap-1.5 overflow-visible">
      {cameras.map((cam: any) => {
        const a = active === cam;
        return (
          <button
            onClick={() => {
              if (!a) Post.create("Character:SetCamera", { section: "Skinshop", id: cam }).then((response) => {
                if (response) setActive(cam)
              })
            }}
            key={cam}
            className={cn(
              "grid size-[3.5rem] place-items-center rounded-md border",
              a
                ? "bg-gradient-primary glow border-primary"
                : "bg-section border-white/15",
            )}
          >
            <div className={cn(!a && "opacity-45")}>
              {createElement(Icon[cam])}
            </div>
          </button>
        );
      })}
    </div>
  );
}
